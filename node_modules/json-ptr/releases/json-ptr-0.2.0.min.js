!function(e){"use strict";var r,t,n=[];if(typeof global==="object"&&global){r=global;t=global.JsonPointer}else if(typeof window!=="undefined"){r=window;t=window.JsonPointer}else{r={}}if(t){n.push(function(){if(r.JsonPointer===p){r.JsonPointer=t;t=e}})}function i(e){if(typeof e!=="string"){throw new TypeError("Invalid type: JSON Pointers are represented as strings.")}if(e.length===0){return[]}if(e[0]!=="/"){throw new ReferenceError("Invalid JSON Pointer syntax. Non-empty pointer must begin with a solidus `/`.")}var r=e.substring(1).split("/"),t=-1,n=r.length;while(++t<n){r[t]=r[t].replace("~1","/").replace("~0","~")}return r}function o(e){if(e&&!Array.isArray(e)){throw new TypeError("Invalid type: path must be an array of segments.")}if(e.length===0){return""}var r=[],t=-1,n=e.length;while(++t<n){if(typeof e[t]==="string"){r.push(e[t].replace("~","~0").replace("/","~1"))}else{r.push(e[t])}}return"/".concat(r.join("/"))}function f(e){if(typeof e!=="string"){throw new TypeError("Invalid type: JSON Pointers are represented as strings.")}if(e.length===0||e[0]!=="#"){throw new ReferenceError("Invalid JSON Pointer syntax; URI fragment idetifiers must begin with a hash.")}if(e.length===1){return[]}if(e[1]!=="/"){throw new ReferenceError("Invalid JSON Pointer syntax.")}var r=e.substring(2).split("/"),t=-1,n=r.length;while(++t<n){r[t]=decodeURIComponent(r[t]).replace("~1","/").replace("~0","~")}return r}function l(e){if(e&&!Array.isArray(e)){throw new TypeError("Invalid type: path must be an array of segments.")}if(e.length===0){return"#"}var r=[],t=-1,n=e.length;while(++t<n){var i=""+e[t];r.push(encodeURIComponent(i.replace("~","~0").replace("/","~1")))}return"#/".concat(r.join("/"))}function a(e,r){var t=r.length,n=0;if(t===0||t>1&&r[0]==="0"){return-1}if(t===1&&r[0]==="-"){return e.length}while(++n<t){if(r[n]<"0"||r[n]>"9"){return-1}}return parseInt(r,10)}function u(e,r,t,n,i,o){var f,a;t=t||[];var s=t.slice(0);if(typeof n!=="undefined"){s.push(n)}var h=typeof e;if(h==="undefined"){return}else{var p=l(s);if(h==="object"&&e!==null){i=i||[];o=o||[];var c=i.indexOf(e);if(c<0){i.push(e);o.push(p);r({fragmentId:p,value:e});if(Array.isArray(e)){f=-1;a=e.length;while(++f<a){u(e[f],r,s,f,i,o)}}else{var g=Object.getOwnPropertyNames(e);f=-1;a=g.length;while(++f<a){u(e[g[f]],r,s,g[f],i,o)}}i.length=i.length-1;o.length=o.length-1}else{r({fragmentId:p,value:{$ref:o[c]},circular:true})}}else{r({fragmentId:p,value:e})}}}function s(e,r){if(typeof e!=="undefined"){var t=e,n=r.length,i=-1,o,f;if(n){while(++i<n&&t){o=r[i];if(Array.isArray(t)){if(isNaN(o)){return}f=a(t,o);if(t.length>f){t=t[f]}else{return}}else{t=t[o]}}return t}else{return e}}}function h(r,t,n,i){if(n.length===0){throw new Error("Cannot set the root object; assign it directly.")}if(typeof r!=="undefined"){var o=r,f=n.length,l=n.length-1,u=-1,s,h,p;if(f){while(++u<f){s=n[u];if(Array.isArray(o)){h=a(o,s);if(o.length>h){if(u===l){p=o[h];o[h]=t;return p}o=o[h]}else if(o.length===h){o.push(t);return e}else{throw new ReferenceError("Not found: ".concat(i(n.slice(0,u+1),true),"."))}}else{if(u===l){p=o[s];o[s]=t;return p}o=o[s];if(typeof o==="undefined"){throw new ReferenceError("Not found: ".concat(i(n.slice(0,u+1),true),"."))}}}if(u===f){return o}}else{return o}}}function p(e){this.encode=e.length>0&&e[0]==="#"?l:o;if(Array.isArray(e)){this.path=e}else{var r=e.length>0&&e[0]==="#"?f:i;this.path=r(e)}}Object.defineProperty(p.prototype,"pointer",{enumerable:true,get:function(){return o(this.path)}});Object.defineProperty(p.prototype,"uriFragmentIdentifier",{enumerable:true,get:function(){return l(this.path)}});p.prototype.get=function(e){return s(e,this.path)};p.prototype.set=function(e,r){return h(e,r,this.path,this.encode)};p.prototype.toString=function(){return this.pointer};p.create=function(e){return new p(e)};p.get=function(e,r){var t=r.length>0&&r[0]==="#"?f:i;return s(e,t(r))};p.set=function(e,r,t){var n=r.length>0&&r[0]==="#"?l:o;var a=r.length>0&&r[0]==="#"?f:i;return h(e,t,a(r),n)};p.list=function(e,r){var t=[];r=r||function(e){t.push(e)};u(e,r);if(t.length){return t}};p.decodePointer=i;p.encodePointer=o;p.decodeUriFragmentIdentifier=f;p.encodeUriFragmentIdentifier=l;p.noConflict=function(){if(n){n.forEach(function(e){e()});n=null}return p};if(typeof module!=="undefined"&&module&&typeof exports==="object"&&exports&&module.exports===exports){module.exports=p}else{r.JsonPointer=p}}();